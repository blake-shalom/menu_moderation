
<div ng-show="isFirst" ng-cloak class="alert-box">
   <h3>Looks Good!</h3>
   <p>Now let's add items to your section.</p>
</div>

<div id="top-entries">
   <div class="row">
      <h3 class="col-md-8">{{section.name}}</h3>
      <h5 class="col-md-4">Menu Items: {{activeTemplate}}</h5>
   </div>
   <div class="row">
      <div class="col-md-9">
         <p>{{section.description}}</p>
         <div ng-repeat="pricing in section.section_prices">
            <p>{{pricing.text}} {{pricing.price}}</p>
         </div>
         <p ng-show="section.annotation">* - {{section.annotation}}</p>
      </div>
      <div class="col-md-3">
         <a class="btn btn-black" href="#/sections">Edit Section Details</a>
      </div>
   </div>
</div>
<div class="top60">
   <div class="row">
      <div class="btn-group col-md-3">
         <div class="btn btn-black" ng-model="isEditingItems" btn-radio="true">{{section.entries.length === 0 ? "Add" : "Edit"}}</div>
         <div class="btn btn-black" ng-model="isEditingItems" btn-radio="false">Arrange</div>
      </div>
      <div class="col-md-6"></div>
      <div class="btn btn-black col-md-3" ng-really-message="Are you sure you want to save changes?" ng-really-click="saveItems()">SAVE CHANGES</div>
   </div>
</div>
<!-- Arrange Items -->
<div ng-hide="isEditingItems" class="top30">
   <div class="row grid-row">
      <div class="col-md-4" ng-repeat="entry in section.entries | orderBy: entry.order">
         <div class="grid-std" data-drop="true" ng-model="section.entries" jqyoui-droppable="{index: {{$index}}}">
            <div class="drag-cell" data-drag="true" ng-model="section.entries" data-jqyoui-options="{revert: 'invalid'}" jqyoui-draggable="{index: {{$index}},placeholder:false,animate:false}">
               <img ng-if="!(entry.image_url=='no entry image')" class="grid-pic" ng-src="{{entry.image_url}}"/>
               <div class="row">
                  <h5 class="col-md-8">{{entry.name}}</h5>
                  <p class="col-md-4">{{entry.price}}</p>
               </div>
               <p>{{entry.description}}</p>
            </div>
         </div>
         <p>{{entry.order}}</p>
      </div>
   </div>
</div>
<!-- Editing items!!! -->
<div ng-show="isEditingItems" class="top30">
   <div ng-show="activeTemplate=='custom'">
      <div flow-init="{singleFile:true}">
         <div class="drop-box" flow-drop flow-drag-enter="style={background: green}" flow-drag-leave="style={}" ng-style="style">
            <div class="btn" flow-btn>Upload File</div>
            <p>or drop them here</p>
         </div>
         <img ng-show="firstEntry.image_url" class="entry-thumb" ng-src="{{firstEntry.image_url}}">
         <img ng-hide="firstEntry.image_url=='no entry image'" class="entry-thumb" flow-img="$flow.files[0]"/>
      </div>
   </div>
   <div class="row">
      <div class="col-md-4" ng-repeat="entry in section.entries | orderBy: entry.order" ng-hide="activeTemplate=='custom'">
         <div class="grid-flex">
            <h5>Item Name</h5>
            <input type="text" class="form-control" ng-model="entry.name">
            <div ng-hide="activeTemplate=='oneLiner'">
               <h5>Description</h5>
               <textarea type="text" class="form-control" ng-model="entry.description" rows="4"></textarea>
            </div>
            <h5>Price</h5>
            <div class='row' ng-repeat="pricing in entry.entry_prices">
              <input class="col-md-3" type="text" placeholder="$0.00" ng-model="pricing.price">
              <input class="col-md-7 left10" type="text" ng-model="pricing.text" ng-disabled="pricing.price == ''">
              <div ng-hide="$index==0" class="btn btn-danger col-md-1" ng-click="removePricing(entry, pricing, $index)">-</div>
            </div>            
            <div class="row">
               <div class="btn btn-black col-md-8 top15 left10" ng-click="addExtraPricing(entry)">+ ADD NEW PRICING</div>
            </div>
            <div ng-hide="activeTemplate=='oneLiner'">
               <h5>Image</h5>
               <div flow-init="{singleFile:true}" flow-files-submitted="$flow.upload()" flow-file-success="encode.encodeImage($file, entry)" flow-file-error="encode.errorUploading($file, $message)">
                  <div class="drop-box" flow-drop flow-drag-enter="style={background: green}" flow-drag-leave="style={}" ng-style="style">
                     <div ng-show="entry.image_url=='no entry image' || $flow.files.length>0">
                        <div class="btn" flow-btn>Upload File</div>
                        <p>or drop them here</p>
                     </div>
                     <img ng-hide="entry.image_url=='no entry image'" class="entry-thumb" ng-src="{{entry.image_url}}"/>
                     <img ng-show="entry.image_url=='no entry image'" class="entry-thumb" flow-img="$flow.files[0]"/>
                  </div>
               </div>
               
               <h5>Ratings</h5>
               <p class="smallp">In addition to a star rating and comments, customers can rate other attributes of this item. Enter attributes you want to be rated. (Ex. Spiciness)</p>
               <div ng-repeat="slider in entry.slider_templates" class="row">
                  <h5 class="col-md-2">{{$index + 1}}</h5>
                  <input type="text" class="col-md-8" ng-model="slider.category">
                  <div class="btn btn-danger col-md-1" ng-click="removeSlider($parent.entry, slider, $index)"></div>
               </div>
               <div ng-hide="entry.slider_templates.length>=2" class="btn btn-success" ng-click="addSlider(entry)">+ add attribute rating</div>
            </div>
            <div class="btn btn-danger" ng-really-message="Are you sure you want to delete this dish?" ng-really-click="removeEntry(entry, $index)">DELETE ENTRY</div>
         </div>
      </div>
      <div ng-show="activeTemplate=='custom'">
         <div class="col-md-4 grid-flex">
            <h5>List Title</h5>
            <input type="text" class="form-control">
            <h5>List to Choose from</h5>
            <p>Seperate different items with a (,). Example: white, wheat, rye</p>
            <input type="text" class="form-control">
            <h5>Additional Price (if any)</h5>
            <input type="text" class="form-control">
         </div>
      </div>
      <div class="col-md-4">
         <div ng-hide="activeTemplate=='custom'" class="btn grid-flex add-button" ng-click="addEntry()">
            <h5 class="top200">+</h5>
            <h5>Add New Item</h5>
         </div>
         <div ng-show="activeTemplate=='custom'" class="btn grid-flex add-button" ng-click="addSubsection()">
            <h5 class="top200">+</h5>
            <h5>Add New Subsection</h5>
         </div>
      </div>
   </div>
</div>
